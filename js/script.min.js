var materialCards=function(){"use strict";var e={version:"1.0",escapeHTML:function(e){if(e&&e.length>0)try{return apex.util.escapeHTML(e.toString())}catch(a){return e.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")}},loader:{start:function(e){try{apex.util.showSpinner($(e))}catch(s){var a=$("<span></span>");a.attr("id","loader"+e),a.addClass("ct-loader fa-stack fa-3x");var t=$("<i></i>");t.addClass("fa fa-circle fa-stack-2x"),t.css("color","rgba(121,121,121,0.6)");var r=$("<i></i>");r.addClass("fa fa-refresh fa-spin fa-inverse fa-stack-1x"),r.css("animation-duration","1.8s"),a.append(t),a.append(r),$(e).append(a)}},stop:function(e){$(e+" > .u-Processing").remove()}},jsonSaveExtend:function(e,a){var t={};if("string"==typeof a)try{a=JSON.parse(a)}catch(e){console.log("Error while try to parse udConfigJSON. Please check your Config JSON. Standard Config will be used."),console.log(e),console.log(a)}else t=a;try{t=$.extend(!0,e,a)}catch(a){console.log("Error while try to merge udConfigJSON into Standard JSON if any attribute is missing. Please check your Config JSON. Standard Config will be used."),console.log(a),t=e,console.log(t)}return t}};return{initialize:function(a,t,r,s,n,i,o){function d(t){A.empty();var s=function(e){var a=$("<div></div>");return a.addClass("s-g-row"),e.append(a),a}(A);t.row&&t.row.length>0?function(t,r,s){r&&r.length>0&&$.each(r,function(r,n){!1!==o&&(n.CARD_ICON=e.escapeHTML(n.CARD_ICON),n.CARD_ICON_COLOR=e.escapeHTML(n.CARD_ICON_COLOR),n.CARD_HEADER_STYLE=e.escapeHTML(n.CARD_HEADER_STYLE),n.CARD_TITLE=e.escapeHTML(n.CARD_TITLE),n.CARD_VALUE=e.escapeHTML(n.CARD_VALUE),n.CARD_FOOTER=e.escapeHTML(n.CARD_FOOTER)),n.CARD_TYPE?"icon"===n.CARD_TYPE.toLowerCase()?c(r,t,n,s):function(e,t,r,s,n){var i="background: linear-gradient(60deg, hsl("+23*e%350+", 55%, 60%), hsl("+23*e%350+", 50%, 60%));box-shadow: 0 12px 20px -10px rgba(230, 230, 230, 0.28), 0 4px 20px 0px rgba(0, 0, 0, 0.12), 0 7px 8px -5px rgba(230, 230, 230, 0.2);",o={fullWidth:!0,chartPadding:{bottom:-12,top:28,right:30,left:-5}},d={};if(n&&"string"==typeof n)try{d=JSON.parse(n)}catch(e){console.log("Error while try to parse CARD_CHART_CONFIG: "+e+n)}else d=n;$.extend(!0,o,d);var l="ct-chart-"+a+e,c=$("<div></div>");c.addClass("s-g-col-"+s.cardWidth);var p=$("<div></div>");p.addClass("at-card");var C=$("<div></div>");C.addClass("card-header card-chart"),C.attr("style",r.CARD_HEADER_STYLE||i);var A=$("<div></div>");A.addClass("ct-chart"),A.attr("id",l),C.append(A),p.append(C);var v=$("<div></div>");v.addClass("card-content");var R=void 0!=r.CARD_TITLE&&r.CARD_TITLE.length>0?r.CARD_TITLE:"";v.append('<p class="category">'+R+"</p>");var h=void 0!=r.CARD_VALUE&&r.CARD_VALUE.length>0?r.CARD_VALUE:"-";v.append('<h2 class="title">'+h+"</h2>"),p.append(v);var g=$("<div></div>");g.addClass("card-footer");var f=$("<div></div>");r.CARD_FOOTER&&((f=$("<div></div>")).addClass("stats"),f.append(r.CARD_FOOTER));if(g.append(f),p.append(g),c.append(p),r.CARD_LINK){var _=$("<a></a>");_.attr("href",r.CARD_LINK),_.append(c),t.append(_)}else t.append(c);var D;if(r.CARD_CHART_DATA){var T={};if("string"==typeof r.CARD_CHART_DATA)try{T=JSON.parse(r.CARD_CHART_DATA)}catch(e){console.log("Error while try to parse CARD_CHART_DATA"),console.log(e),console.log(r.CARD_CHART_DATA)}else T=r.CARD_CHART_DATA;switch(r.CARD_TYPE.toLowerCase()){case"chart-line":D=new Chartist.Line("#"+l,T,o);break;case"chart-bar":D=new Chartist.Bar("#"+l,T,o);break;case"chart-pie":o.chartPadding={},D=new Chartist.Pie("#"+l,T,o);break;default:console.log("No valid Chart type")}var O=void 0!=r.CARD_ICON_COLOR&&r.CARD_ICON_COLOR.length>0?r.CARD_ICON_COLOR:"white";D.on("draw",function(e){var a={};if(r.CARD_CHART_DATA&&"string"==typeof r.CARD_CHART_DATA)try{a=JSON.parse(r.CARD_CHART_DATA)}catch(e){console.log("Error while try to parse CARD_CHART_CONFIG: "+e+n)}else a=r.CARD_CHART_DATA;a.colors&&(O=a.colors[e.index]||a.colors[0]),"bar"!==e.type&&"line"!==e.type&&"point"!==e.type||(o.strokeWidth?e.element.attr({style:"stroke:  "+O+"; stroke-width:"+o.strokeWidth+"px;"}):e.element.attr({style:"stroke:  "+O})),"slice"===e.type&&e.element.attr({style:"fill: "+O+"; fill-opacity: "+(a.colors?.6:(e.index%10+2)/10)}),"area"===e.type&&e.element.attr({style:"fill: "+O+"; fill-opacity: "+(e.index%10+2)/10}),!0===o.donut&&(o.sliceWidth&&$(A).find(".ct-slice-donut").css("stroke-width",o.sliceWidth.toString()+"px"),e.element.attr({style:"stroke-opacity: "+(-e.index%10+10)/10+"; stroke:  "+O}),$(A).find(".ct-label").css("stroke","initial"),$(A).find(".ct-label").css("fill",a.colors?"white":O)),$(A).find(".ct-slice-pie").attr("stroke",a.colors?"rgba(0,0,0,0)":O),$(A).find(".ct-slice-donut").attr("stroke",O),$(A).find(".ct-label").css("color",a.colors?"white":O),$(A).find(".ct-grid").css("stroke",a.colors?"white":O),$(A).find(".ct-grid").css("opacity",".4")})}}(r,t,n,s,n.CARD_CHART_CONFIG):c(r,t,n,s)})}(s,t.row,C):(A.css("min-height",""),s.append('<div class="s-g-col-12">'+r+"</div>"))}function l(){if(t){e.loader.start(A);var a=n;apex.server.plugin(t,{pageItems:a},{success:d,error:function(e){A.empty(),console.log(e.responseText),A.append("<span>Error occured please check console for more information</span>")},dataType:"json"})}else try{e.loader.start(A),setTimeout(function(){d(dataJSON)},500)}catch(e){console.log("need data json"),console.log(e)}}function c(e,a,t,r){var s="background: linear-gradient(60deg, hsl("+23*e%350+", 55%, 60%), hsl("+23*e%350+", 50%, 60%));box-shadow: 0 12px 20px -10px rgba(230, 230, 230, 0.28), 0 4px 20px 0px rgba(0, 0, 0, 0.12), 0 7px 8px -5px rgba(230, 230, 230, 0.2);",n=$("<div></div>");n.addClass("s-g-col-"+r.cardWidth);var i=$("<div></div>");i.addClass("at-card at-card-stats");var o=$("<div></div>");if(o.addClass("card-header"),t.CARD_ICON){var d=$("<i></i>");d.addClass("fa "+t.CARD_ICON);var l=void 0!=t.CARD_ICON_COLOR&&t.CARD_ICON_COLOR.length>0?t.CARD_ICON_COLOR:"white";d.attr("style","color:"+l),o.append(d)}o.attr("style",t.CARD_HEADER_STYLE||s),i.append(o);var c=$("<div></div>");c.addClass("card-content");var p=void 0!=t.CARD_TITLE?t.CARD_TITLE:"";c.append('<p class="category">'+p+"</p>");var C=void 0!=t.CARD_VALUE?t.CARD_VALUE:"";c.append('<h2 class="title">'+C+"</h2>"),i.append(c);var A=$("<div></div>");A.addClass("card-footer");var v=$("<div></div>");if(t.CARD_FOOTER&&((v=$("<div></div>")).addClass("stats"),v.append(t.CARD_FOOTER)),A.append(v),i.append(A),n.append(i),t.CARD_LINK){var R=$("<a></a>");R.attr("href",t.CARD_LINK),R.append(n),a.append(R)}else a.append(n)}var p=$("#"+a);if(p.length>0){var C={};C=e.jsonSaveExtend({cardWidth:4,refresh:0},s);var A=function(e){var a=$("<div></div>");return a.addClass("s-g-container"),a.css("min-height","170px"),e.append(a),a}(p);l();try{apex.jQuery("#"+i).bind("apexrefresh",function(){0==A.children("span").length&&l()})}catch(e){console.log("Can't bind refresh event on "+i+". Apex is missing"),console.log(e)}C.refresh>0&&setInterval(function(){0==A.children("span").length&&l()},1e3*C.refresh)}else console.log("Can't find parentID: "+a)}}}();