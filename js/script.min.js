var materialCards=function(){"use strict";return{initialize:function(e,a,t,r,i,s){function p(e){var a="#"+e.replace(/,/g,",#");return a}function C(){try{apex.util.showSpinner(l)}catch(a){var t=$("<span></span>");t.attr("id","loader"+e),t.addClass("ct-loader fa-stack fa-3x");var r=$("<i></i>");r.addClass("fa fa-circle fa-stack-2x"),r.css("color","rgba(121,121,121,0.6)");var i=$("<i></i>");i.addClass("fa fa-refresh fa-spin fa-inverse fa-stack-1x"),i.css("animation-duration","1.8s"),t.append(r),t.append(i),l.append(t)}}function f(){}function v(e){l.empty();var a=A(l);e.row&&e.row.length>0?R(a,e.row,d):(l.css("min-height",""),a.append('<div class="s-g-col-12">'+t+"</div>"))}function h(e){var a=$("<div></div>");return a.addClass("s-g-container"),a.css("min-height","170px"),e.append(a),a}function A(e){var a=$("<div></div>");return a.addClass("s-g-row"),e.append(a),a}function g(){if(a){C();var e=p(i);apex.server.plugin(a,{pageItems:e},{success:v,error:function(e){l.empty(),console.log(e.responseText),l.append("<span>Error occured please check console for more information</span>")},dataType:"json"})}else try{C(),setTimeout(function(){v(dataJSON)},500)}catch(t){console.log("need data json"),console.log(t)}}function R(e,a,t){a&&a.length>0&&($.each(a,function(a,r){r.CARD_TYPE?"icon"===r.CARD_TYPE.toLowerCase()?_(a,e,r,t):u(a,e,r,t,r.CARD_CHART_CONFIG):_(a,e,r,t)}),f())}function _(e,a,t,r){var i="background: linear-gradient(60deg, hsl("+23*e%350+", 55%, 60%), hsl("+23*e%350+", 50%, 60%));box-shadow: 0 12px 20px -10px rgba(230, 230, 230, 0.28), 0 4px 20px 0px rgba(0, 0, 0, 0.12), 0 7px 8px -5px rgba(230, 230, 230, 0.2);",s=$("<div></div>");s.addClass("s-g-col-"+r.cardWidth);var n=$("<div></div>");n.addClass("at-card at-card-stats");var d=$("<div></div>");if(d.addClass("card-header"),t.CARD_ICON){var o=$("<i></i>");o.addClass("fa "+t.CARD_ICON);var l=void 0!=t.CARD_ICON_COLOR&&t.CARD_ICON_COLOR.length>0?t.CARD_ICON_COLOR:"white";o.attr("style","color:"+l),d.append(o)}d.attr("style",t.CARD_HEADER_STYLE||i),n.append(d);var c=$("<div></div>");c.addClass("card-content");var p=void 0!=t.CARD_TITLE?t.CARD_TITLE:"";c.append('<p class="category">'+p+"</p>");var C=void 0!=t.CARD_VALUE?t.CARD_VALUE:"";c.append('<h2 class="title">'+C+"</h2>"),n.append(c);var f=$("<div></div>");f.addClass("card-footer");var v=$("<div></div>");if(t.CARD_FOOTER&&(v=$("<div></div>"),v.addClass("stats"),v.append(t.CARD_FOOTER)),f.append(v),n.append(f),s.append(n),t.CARD_LINK){var h=$("<a></a>");h.attr("href",t.CARD_LINK),h.append(s),a.append(h)}else a.append(s)}function u(a,t,r,i,s){var n="background: linear-gradient(60deg, hsl("+23*a%350+", 55%, 60%), hsl("+23*a%350+", 50%, 60%));box-shadow: 0 12px 20px -10px rgba(230, 230, 230, 0.28), 0 4px 20px 0px rgba(0, 0, 0, 0.12), 0 7px 8px -5px rgba(230, 230, 230, 0.2);",d={fullWidth:!0,chartPadding:{bottom:-12,top:28,right:30,left:-5}},o={};if(s&&"string"==typeof s)try{o=JSON.parse(s)}catch(l){console.log("Error while try to parse CARD_CHART_CONFIG: "+l+s)}else o=s;$.extend(!0,d,o);var c="ct-chart-"+e+a,p=$("<div></div>");p.addClass("s-g-col-"+i.cardWidth);var C=$("<div></div>");C.addClass("at-card");var f=$("<div></div>");f.addClass("card-header card-chart"),f.attr("style",r.CARD_HEADER_STYLE||n);var v=$("<div></div>");v.addClass("ct-chart"),v.attr("id",c),f.append(v),C.append(f);var h=$("<div></div>");h.addClass("card-content");var A=void 0!=r.CARD_TITLE&&r.CARD_TITLE.length>0?r.CARD_TITLE:"";h.append('<p class="category">'+A+"</p>");var g=void 0!=r.CARD_VALUE&&r.CARD_VALUE.length>0?r.CARD_VALUE:"-";h.append('<h2 class="title">'+g+"</h2>"),C.append(h);var R=$("<div></div>");R.addClass("card-footer");var _=$("<div></div>");if(r.CARD_FOOTER&&(_=$("<div></div>"),_.addClass("stats"),_.append(r.CARD_FOOTER)),R.append(_),C.append(R),p.append(C),r.CARD_LINK){var u=$("<a></a>");u.attr("href",r.CARD_LINK),u.append(p),t.append(u)}else t.append(p);var D;if(r.CARD_CHART_DATA){var T={};if("string"==typeof r.CARD_CHART_DATA)try{T=JSON.parse(r.CARD_CHART_DATA)}catch(l){console.log("Error while try to parse CARD_CHART_DATA"),console.log(l),console.log(r.CARD_CHART_DATA)}else T=r.CARD_CHART_DATA;switch(r.CARD_TYPE.toLowerCase()){case"chart-line":D=new Chartist.Line("#"+c,T,d);break;case"chart-bar":D=new Chartist.Bar("#"+c,T,d);break;case"chart-pie":d.chartPadding={},D=new Chartist.Pie("#"+c,T,d);break;default:console.log("No valid Chart type")}var y=void 0!=r.CARD_ICON_COLOR&&r.CARD_ICON_COLOR.length>0?r.CARD_ICON_COLOR:"white";D.on("draw",function(e){var a={};if(r.CARD_CHART_DATA&&"string"==typeof r.CARD_CHART_DATA)try{a=JSON.parse(r.CARD_CHART_DATA)}catch(t){console.log("Error while try to parse CARD_CHART_CONFIG: "+t+s)}else a=r.CARD_CHART_DATA;a.colors&&(y=a.colors[e.index]||a.colors[0]),("bar"===e.type||"line"===e.type||"point"===e.type)&&(d.strokeWidth?e.element.attr({style:"stroke:  "+y+"; stroke-width:"+d.strokeWidth+"px;"}):e.element.attr({style:"stroke:  "+y})),"slice"===e.type&&e.element.attr({style:"fill: "+y+"; fill-opacity: "+(a.colors?.6:(e.index%10+2)/10)}),"area"===e.type&&e.element.attr({style:"fill: "+y+"; fill-opacity: "+(e.index%10+2)/10}),d.donut===!0&&(d.sliceWidth&&$(v).find(".ct-slice-donut").css("stroke-width",d.sliceWidth.toString()+"px"),e.element.attr({style:"stroke-opacity: "+(-e.index%10+10)/10+"; stroke:  "+y}),$(v).find(".ct-label").css("stroke","initial"),$(v).find(".ct-label").css("fill",a.colors?"white":y)),$(v).find(".ct-slice-pie").attr("stroke",a.colors?"rgba(0,0,0,0)":y),$(v).find(".ct-slice-donut").attr("stroke",y),$(v).find(".ct-label").css("color",a.colors?"white":y),$(v).find(".ct-grid").css("stroke",a.colors?"white":y),$(v).find(".ct-grid").css("opacity",".4")})}}var n={cardWidth:4,refresh:0},d={},o=$("#"+e);if(o.length>0){var l=h(o);if("string"==typeof r)try{d=JSON.parse(r)}catch(c){console.log("Error while try to parse udConfigJSON. Please check your Config JSON. Standard Config will be used."),console.log(c),console.log(r),d={}}else d=r;try{d=$.extend(!0,n,d)}catch(c){console.log("Error while try to merge udConfigJSON into Standard JSON if any attribute is missing. Please check your Config JSON. Standard Config will be used."),console.log(c),d=n,console.log(d)}g();try{apex.jQuery("#"+s).bind("apexrefresh",function(){0==l.children("span").length&&g()})}catch(c){console.log("Can't bind refresh event on "+s+". Apex is missing"),console.log(c)}d.refresh>0&&setInterval(function(){0==l.children("span").length&&g()},1e3*d.refresh)}else console.log("Can't find parentID: "+e)}}}();